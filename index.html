<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Orbital Mirage</title>
<style>
  html, body {
    margin: 0; padding: 0;
    background: #000; color: #fff;
    font-family: system-ui, sans-serif;
    overflow-x: hidden;
  }

  /* Intro */
  .intro {
    min-height: 100vh;
    display: grid; place-items: center;
    text-align: center; padding: 2rem;
    background: #000;
  }

  /* Panels (Scrollraum) */
  .panel {
    height: 200vh;              /* Scrollen über ein „fixiertes“ Bild */
    position: relative;
  }

  /* Frame bleibt am Viewport „kleben“ */
  .frame {
    position: sticky; top: 0; height: 100vh;
    display: flex; align-items: flex-end; justify-content: center;
    overflow: visible;          /* WICHTIG: nichts wegschneiden */
  }

  /* Bild als Pseudolayer */
  .frame::before {
    content: "";
    position: absolute; inset: 0;
    background: center / contain no-repeat;
    background-image: var(--bg);
    opacity: 0;
    transition: opacity 1200ms ease;
    z-index: 0;
  }
  .panel.visible .frame::before { opacity: 1; }

  /* Caption */
  .caption {
    position: relative; z-index: 1;
    background: rgba(0,0,0,.6);
    padding: 1.25rem 1.6rem; border-radius: 12px;
    max-width: 720px; margin: 0 1rem 12vh;
    text-align: center;
    opacity: 0; transform: translateY(24px);
    transition: opacity 600ms ease, transform 600ms ease;
  }
  .panel.visible .caption { opacity: 1; transform: translateY(0); }

  /* kleines Debug-Overlay */
  #debug {
    position: fixed; left: 10px; bottom: 10px; z-index: 9999;
    background: rgba(0,0,0,.7); border: 1px solid #444; border-radius: 8px;
    padding: 6px 8px; font: 12px/1.3 ui-monospace, Menlo, Consolas, monospace;
    max-width: 80vw; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  }
</style>
</head>
<body>

<section class="intro">
  <div>
    <h1>Orbital Mirage</h1>
    <p>(Scrollen, um die Werke zu entdecken)</p>
  </div>
</section>

<!-- Panels: JE 200vh, darin sticky Frame (100vh) -->
<section class="panel" data-bg="https://tillrueckwart.github.io/orbitalmirage/assets/Salty_Glitches_001.jpg">
  <div class="frame">
    <div class="caption">
      <h2>Salty Glitches 001</h2>
      <p>Beschreibung/Untertitel</p>
    </div>
  </div>
</section>

<section class="panel" data-bg="https://tillrueckwart.github.io/orbitalmirage/assets/Salty_Glitches_002.jpg">
  <div class="frame">
    <div class="caption">
      <h2>Salty Glitches 002</h2>
      <p>Beschreibung/Untertitel</p>
    </div>
  </div>
</section>

<section class="panel" data-bg="https://tillrueckwart.github.io/orbitalmirage/assets/Salty_Glitches_003.jpg">
  <div class="frame">
    <div class="caption">
      <h2>Salty Glitches 003</h2>
      <p>Beschreibung/Untertitel</p>
    </div>
  </div>
</section>

<section class="panel" data-bg="https://tillrueckwart.github.io/orbitalmirage/assets/Salty_Glitches_004.jpg">
  <div class="frame">
    <div class="caption">
      <h2>Salty Glitches 004</h2>
      <p><img src="https://tillrueckwart.github.io/orbitalmirage/assets/QR_Salty_Glitches_004.png" width="120" height="120" alt=""></p>
    </div>
  </div>
</section>

<section class="panel" data-bg="https://tillrueckwart.github.io/orbitalmirage/assets/Salty_Glitches_005.jpg">
  <div class="frame">
    <div class="caption">
      <h2>Salty Glitches 005</h2>
      <p><img src="https://tillrueckwart.github.io/orbitalmirage/assets/QR_Salty_Glitches_005.png" width="120" height="120" alt=""></p>
    </div>
  </div>
</section>

<section class="panel" data-bg="https://tillrueckwart.github.io/orbitalmirage/assets/Salty_Glitches_006.jpg">
  <div class="frame">
    <div class="caption">
      <h2>Salty Glitches 006</h2>
      <p><img src="https://tillrueckwart.github.io/orbitalmirage/assets/QR_Salty_Glitches_006.png" width="120" height="120" alt=""></p>
    </div>
  </div>
</section>

<div id="debug">init…</div>

<script>
  // 1) Bild-URLs als CSS-Variable in den Frame schreiben
  document.querySelectorAll('.panel').forEach(p => {
    const url = p.getAttribute('data-bg');
    const frame = p.querySelector('.frame');
    frame.style.setProperty('--bg', `url("${url}")`);
  });

  // 2) Sichtbarkeit mit großzügiger Margin beobachten (sicheres Triggern)
  const debug = document.getElementById('debug');
  const io = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      e.target.classList.toggle('visible', e.isIntersecting);
      if (e.isIntersecting) {
        const url = e.target.getAttribute('data-bg');
        debug.textContent = 'visible: ' + url;
      }
    });
  }, {
    root: null,
    threshold: 0.5,
    rootMargin: '-10% 0px -10% 0px' // etwas früher/später ein-/ausblenden
  });

  document.querySelectorAll('.panel').forEach(p => io.observe(p));
</script>

</body>
</html>
